---
- name: Create docker volume of Nexus3
  docker_volume:
    name: "nexus3-{{nexus3_version}}"
  become: yes

- name: create nexus3 container
  docker_container:
    name: "nexus3-{{nexus3_version}}"
    image: sonatype/nexus3:{{nexus3_version}}
    restart_policy: always
    ports:
    - "{{ nexus3_web_port  }}:8081"
    - "{{ nexus3_web_port + 1 }}:8082"
    - "{{ nexus3_web_port + 2 }}:8083"
    - "{{ nexus3_web_port + 3 }}:8084"
    - "{{ nexus3_web_port + 4 }}:8085"
    - "{{ nexus3_web_port + 5 }}:8086"

    volumes:
    - "nexus3-{{nexus3_version}}:/nexus-data"
  become: yes
