{% if platform == 'Linux' %}
[[runners]]
  name = "{{description}}"
  url = "{{ url }}"
  token = "{{ token }}"
  executor = "shell"
  pre_build_script = """set -e
  WD=$HOME/.epm/.workbench/{{workbench}}
  source $WD/venv/bin/activate
  python $WD/script/pre_build.py
  """
  environment = ["LC_ALL=en_US.UTF-8", "EPM_WORKBENCH={{workbench}}"]
  [runners.custom_build_dir]
  [runners.cache]
    [runners.cache.s3]
    [runners.cache.gcs]
    [runners.cache.azure]
{% endif %}    
{#
[[runners]]
  name = "{{runner.description}}"
  url = "{{ url }}"
  token = "{{ token }}"
  executor = "docker"
  limit = {{ limit | default(1) }}
  environment = ["LC_ALL=en_US.UTF-8", "EPM_WORKBENCH="]

  pre_build_script = """set -e
  WD=$HOME/.epm/.workbench/{{workbench}}/{{ kind }}
  chmod +x $WD/script/builder_pre_build.py
  $WD/script/builder_pre_build.py
  """

  [runners.docker]
    image = "edgetoolkit/gcc5"
    tls_verify = false
    privileged = true
    disable_cache = false
    volumes = ["/certs/client", "/cache", "{{ansible_env.HOME}}/.epm/{{workbench}}:/home/conan/.epm"]
    pull_policy = "if-not-present"
  [runners.cache]
    [runners.cache.s3]
    [runners.cache.gcs]
#}

